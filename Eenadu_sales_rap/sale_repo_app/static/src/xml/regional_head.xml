<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
  <t t-name="sale_repo_app.regional_head_dashboard_template" owl="1">
      <div class="d-flex flex-row">
          <h1 class="mt-2">Regional Head Dashboard</h1>   <button t-on-click="user_creation" style="margin:5px;margin-left:20px; cursor:pointer; display: inline-block; padding: 8px 12px; white-space: nowrap; height:36px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);">creat user</button>
          <button t-on-click="excel_report" style="margin:5px;margin-left:20px; cursor:pointer; display: inline-block; padding: 8px 12px; white-space: nowrap; height:36px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);">Report of Customer Forms in EXCEL Format</button>
          <button t-on-click="attendance_excel_report" style="margin:5px;margin-left:20px; cursor:pointer; display: inline-block; padding: 8px 12px; white-space: nowrap; height:36px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);">ATTENDANCE</button>
          <button t-on-click="reg_head_cu_form">Total Customer Forms</button>
      </div>
      <hr/>
    <div class="dashboard-wrapper container-fluid" style="max-height: 85vh; overflow-y: auto; padding-right: 15px;">
      <!-- Dashboard View -->
      <t t-if="state.currentView === 'dashboard'">
        <t t-if="state.loading">
          <p>Loading units...</p>
        </t>
        <t t-elif="state.error">
          <p class="text-danger">Error: <t t-esc="state.error" /></p>
        </t>
        <t t-elif="state.unit_names.length === 0">
          <p>No units available.</p>
        </t>
        <t t-else="">
          <t t-foreach="state.unit_names" t-as="unit" t-key="unit_index">
            <div class="list-group-item" style="margin:5px; cursor:pointer; display: inline-block; padding: 8px 12px; white-space: nowrap; height:36px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);" t-on-click="() => this.navigateToUnit(unit)">
              <i class="fa fa-building" style="margin-right: 8px;"></i>
              Unit Name: <strong><t t-esc="unit" /></strong><br/>
            </div>
          </t>
        </t>
      </t>
      <!-- Unit Detail View -->
      <t t-if="state.currentView === 'unit_detail'">
        <div class="container-fluid" style="padding: 15px;">

            <hr/>
          <t t-if="state.selected_unit">
            <h4>Unit: <strong><t t-esc="state.selected_unit" /></strong></h4>
            <t t-if="state.loading">
              <p>Loading unit details...</p>
            </t>
            <t t-elif="state.error">
              <p class="text-danger">Error: <t t-esc="state.error" /></p>
            </t>
            <t t-elif="!state.unit_details">
              <p>No unit details available.</p>
            </t>
            <t t-else="">
              <!-- Circulation Incharge -->
              <h5>Circulation Incharge</h5>
              <t t-if="state.unit_details.circulation_incharge.length === 0">
                <p>No Circulation Incharge assigned.</p>
              </t>
              <t t-else="">
                <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Email</th>
                      <th>Phone</th>
                      <th>Aadhar Number</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    <t t-foreach="state.unit_details.circulation_incharge" t-as="user" t-key="user.id">
                      <tr>
                        <td><t t-esc="user.name || 'Unknown'" /></td>
                        <td><t t-esc="user.email || 'No email'" /></td>
                        <td><t t-esc="user.phone || 'No phone'" /></td>
                        <td><t t-esc="user.aadhar_number || 'Not provided'" /></td>
                        <td><t t-esc="user.status || 'Unknown'" /></td>
                      </tr>
                    </t>
                  </tbody>
                </table>
              </t>
              <!-- Segment Incharge -->
              <h5>Segment Incharge</h5>
              <t t-if="state.unit_details.segment_incharge.length === 0">
                <p>No Segment Incharge assigned.</p>
              </t>
              <t t-else="">
                <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Email</th>
                      <th>Phone</th>
                      <th>Aadhar Number</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    <t t-foreach="state.unit_details.segment_incharge" t-as="user" t-key="user.id">
                      <tr>
                        <td><t t-esc="user.name || 'Unknown'" /></td>
                        <td><t t-esc="user.email || 'No email'" /></td>
                        <td><t t-esc="user.phone || 'No phone'" /></td>
                        <td><t t-esc="user.aadhar_number || 'Not provided'" /></td>
                        <td><t t-esc="user.status || 'Unknown'" /></td>
                      </tr>
                    </t>
                  </tbody>
                </table>
              </t>
              <!-- Unit Manager -->
              <h5>Unit Manager</h5>
              <t t-if="state.unit_details.unit_manager.length === 0">
                <p>No Unit Manager assigned.</p>
              </t>
              <t t-else="">
                <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Email</th>
                      <th>Phone</th>
                      <th>Aadhar Number</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    <t t-foreach="state.unit_details.unit_manager" t-as="user" t-key="user.id">
                      <tr>
                        <td><t t-esc="user.name || 'Unknown'" /></td>
                        <td><t t-esc="user.email || 'No email'" /></td>
                        <td><t t-esc="user.phone || 'No phone'" /></td>
                        <td><t t-esc="user.aadhar_number || 'Not provided'" /></td>
                        <td><t t-esc="user.status || 'Unknown'" /></td>
                      </tr>
                    </t>
                  </tbody>
                </table>
              </t>
              <!-- Office Staff -->
              <h5>Office Staff</h5>
              <t t-if="state.unit_details.Office_staff.length === 0">
                <p>No Office Staff assigned.</p>
              </t>
              <t t-else="">
                <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Email</th>
                      <th>Phone</th>
                      <th>Aadhar Number</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    <t t-foreach="state.unit_details.Office_staff" t-as="user" t-key="user.id">
                      <tr>
                        <td><t t-esc="user.name || 'Unknown'" /></td>
                        <td><t t-esc="user.email || 'No email'" /></td>
                        <td><t t-esc="user.phone || 'No phone'" /></td>
                        <td><t t-esc="user.aadhar_number || 'Not provided'" /></td>
                        <td><t t-esc="user.status || 'Unknown'" /></td>
                      </tr>
                    </t>
                  </tbody>
                </table>
              </t>
              <!-- Agents -->
              <h5>Agents</h5>
              <t t-if="state.unit_details.agent.length === 0">
                <p>No Agents assigned.</p>
              </t>
              <t t-else="">
                <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Email</th>
                      <th>Phone</th>
                      <th>Aadhar Number</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    <t t-foreach="state.unit_details.agent" t-as="user" t-key="user.id">
                        <tr t-on-click="() => this.selectUser(user.id)"
                            style="cursor: pointer;">
                            <td><t t-esc="user.name || 'Unknown'" /></td>
                            <td><t t-esc="user.email || 'No email'" /></td>
                            <td><t t-esc="user.phone || 'No phone'" /></td>
                            <td><t t-esc="user.aadhar_number || 'Not provided'" /></td>
                            <td><t t-esc="user.status || 'Unknown'" /></td>
                        </tr>
                        <div t-if="state.selectedUserId === user.id">
                          <div t-on-click="() => this.today_attendance(user.id)" class="btn d-flex btn-light btn-lg border m-3 p-2">
                            <p>Staff Attendance</p>
                          </div>
                          <div t-on-click="() => this.totalCustomerForms(user.email,user.id)" class="btn d-flex btn-light btn-lg border m-3 p-2">
                            <p>Total customer forms</p>
                          </div>
                        </div>
                    </t>
                  </tbody>
                </table>
              </t>
            </t>
            <button class="btn btn-primary mt-3" t-on-click="goBack">Back to Dashboard</button>
          </t>
          <t t-else="">
            <p>No unit selected.</p>
          </t>
        </div>
      </t>
    </div>
  </t>
</templates>