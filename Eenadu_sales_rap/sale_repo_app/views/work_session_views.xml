<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Tree View -->
    <record id="view_work_session_tree" model="ir.ui.view">
        <field name="name">work.session.tree</field>
        <field name="model">work.session</field>
        <field name="arch" type="xml">
            <tree string="Work Sessions">
                <field name="user_id"/>
                <field name="start_time"/>
                <field name="end_time"/>
                <field name="duration"/>
            </tree>
        </field>
    </record>

    <!-- Form View -->
    <record id="view_work_session_form" model="ir.ui.view">
        <field name="name">work.session.form</field>
        <field name="model">work.session</field>
        <field name="arch" type="xml">
            <form string="Work Session">
                <sheet>
                    <group>
                        <field name="user_id"/>
                        <field name="start_time"/>
                        <field name="end_time"/>
                        <field name="duration" readonly="1"/>
                    </group>
                    <group string="Start Selfie">
                        <field name="start_selfie" widget="image" class="oe_avatar"/>
                    </group>
                    <group string="End Selfie">
                        <field name="end_selfie" widget="image" class="oe_avatar"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Search View -->
    <record id="view_work_user_search" model="ir.ui.view">
        <field name="name">work.session.search</field>
        <field name="model">work.session</field>
        <field name="arch" type="xml">
            <search string="Work Session Search">
                <field name="user_id"/>
                <field name="start_time"/>
                <field name="end_time"/>

                <!-- Filters -->
                <filter name="one_day_filter"
                        string="Today"
                        domain="[('start_time','&gt;=', context_today()), ('start_time','&lt;', (context_today() + relativedelta(days=1)))]"/>

                <filter name="week_filter"
                        string="This Week"
                        domain="[('start_time','&gt;=', (context_today() - relativedelta(days=context_today().weekday()))),
                                 ('start_time','&lt;', (context_today() + relativedelta(days=7-context_today().weekday())))]"/>

                <filter name="month_filter"
                        string="This Month"
                        domain="[('start_time','&gt;=', context_today().replace(day=1)),
                                 ('start_time','&lt;', (context_today() + relativedelta(months=1)).replace(day=1))]"/>

                <!-- Group By -->
                <group expand="1" string="Group By">
                    <filter name="group_by_user" string="User" context="{'group_by': 'user_id'}"/>
                    <filter name="group_by_date" string="Date" context="{'group_by': 'start_time'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Action -->
    <record id="action_work_session" model="ir.actions.act_window">
        <field name="name">Work Sessions</field>
        <field name="res_model">work.session</field>
        <field name="view_mode">tree,form</field>
        <field name="search_view_id" ref="view_work_user_search"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Start and end selfies of user sessions will appear here.
            </p>
        </field>
    </record>

</odoo>
